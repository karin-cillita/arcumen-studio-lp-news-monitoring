---
interface Props {
  calendarUrl?: string;
}

const { calendarUrl = "#" } = Astro.props;

const navLinks = [
  { label: "The Problem", href: "#problem" },
  { label: "How It Works", href: "#offering" },
  { label: "Who It's For", href: "#who-for" },
  { label: "FAQ", href: "#faq" },
];
---

<header id="header" class="fixed top-0 left-0 right-0 z-50 bg-ivory border-b border-stone/30">
  <div class="max-w-7xl mx-auto px-8 py-5 flex items-center justify-between">
    <!-- Logo -->
    <a href="/" class="flex items-center space-x-2">
      <div class="w-8 h-8 bg-navy flex items-center justify-center">
        <span class="text-ivory font-bold text-sm">A</span>
      </div>
      <span class="text-xl font-semibold tracking-tight text-navy">Arcumen Studio</span>
    </a>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex items-center space-x-8">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class="text-sm font-medium text-stone hover:text-navy transition-colors"
        >
          {link.label}
        </a>
      ))}
    </nav>

    <!-- CTA Button -->
    <a
      href={calendarUrl}
      target="_blank"
      rel="noopener noreferrer"
      class="hidden md:block bg-gold text-ivory px-6 py-2.5 text-sm font-medium hover:bg-gold/90 transition-colors"
      onclick="plausible('booking_click')"
    >
      Start your free week
    </a>

    <!-- Mobile Menu Button -->
    <button
      id="mobile-menu-btn"
      class="md:hidden p-2 text-navy"
      aria-label="Toggle menu"
    >
      <svg
        id="menu-icon"
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"
        />
      </svg>
      <svg
        id="close-icon"
        class="w-6 h-6 hidden"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
    </button>
  </div>

  <!-- Mobile Menu Panel -->
  <div
    id="mobile-menu"
    class="md:hidden hidden bg-ivory border-t border-stone/20"
  >
    <div class="px-8 py-4 flex flex-col gap-4">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class="text-base font-medium text-charcoal hover:text-navy transition-colors py-2"
        >
          {link.label}
        </a>
      ))}
      <a
        href={calendarUrl}
        target="_blank"
        rel="noopener noreferrer"
        class="mt-2 bg-gold text-ivory px-6 py-3 text-sm font-medium text-center hover:bg-gold/90 transition-colors"
      >
        Start your free week
      </a>
    </div>
  </div>
</header>

<script>
  const menuBtn = document.getElementById("mobile-menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");
  const menuIcon = document.getElementById("menu-icon");
  const closeIcon = document.getElementById("close-icon");

  menuBtn?.addEventListener("click", () => {
    const isOpen = mobileMenu?.classList.contains("hidden");

    if (isOpen) {
      mobileMenu?.classList.remove("hidden");
      menuIcon?.classList.add("hidden");
      closeIcon?.classList.remove("hidden");
    } else {
      mobileMenu?.classList.add("hidden");
      menuIcon?.classList.remove("hidden");
      closeIcon?.classList.add("hidden");
    }
  });

  mobileMenu?.querySelectorAll("a").forEach((link) => {
    link.addEventListener("click", () => {
      mobileMenu?.classList.add("hidden");
      menuIcon?.classList.remove("hidden");
      closeIcon?.classList.add("hidden");
    });
  });
</script>
